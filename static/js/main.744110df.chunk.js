(this["webpackJsonptic-tac-toe"]=this["webpackJsonptic-tac-toe"]||[]).push([[0],[,,,,function(e,t,n){e.exports={playgroundItem:"playgroundItem_playgroundItem__1m81P",x:"playgroundItem_x__1Hxzb",lineR:"playgroundItem_lineR__2X_ty",append:"playgroundItem_append__2QgP3",lineL:"playgroundItem_lineL__1qbDe",o:"playgroundItem_o__HYVdx"}},,,function(e,t,n){e.exports={playground:"playground_playground__I7UjC",winLine:"playground_winLine__1zBn9"}},function(e,t,n){e.exports={game:"game_game__3w1S1",wrapper:"game_wrapper__3JAZt"}},function(e,t,n){e.exports={modalBackface:"modal_modalBackface__33v4A",modal:"modal_modal__35s58"}},,function(e,t,n){e.exports={raiting:"raiting_raiting__3vQlz"}},function(e,t,n){e.exports={startScreen:"startScreen_startScreen__3Z9dl"}},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),o=n.n(c),i=(n(17),n(3)),l=n(2),s=(n(18),n(7)),u=n.n(s),d=n(5),j=n(4),f=n.n(j),p=n(0),b=function(e){var t=e.n,n=e.initGame,r=Object(a.useContext)(T),c=r.store,o=r.dispatch,s=r.winningVariations,u=Object(a.useState)(!1),j=Object(i.a)(u,2),b=j[0],O=j[1];Object(a.useEffect)((function(){O(c.fields[t].mark||!1)}),[c.fields]);var m=Object(a.useCallback)((function(){if(!b){var e=Object.values(c.players);O(e[c.currentPlayer].mark),o({type:"SET_CURRENT_PLAYER",payload:0===c.currentPlayer?1:0});var n=c.fields;c.fields.splice(t,1,{n:t,mark:e[c.currentPlayer].mark}),console.log("!!!",n),o({type:"INIT_FIELDS",payload:n})}}),[c.players,c.currentPlayer,b,c.fields]);Object(a.useEffect)((function(){c.fields.filter((function(e){return""!==e.mark})).length>4&&y()}),[c.fields,b]);var y=Object(a.useCallback)((function(){var e=Object.values(c.players),t=e[0===c.currentPlayer?1:0],a=t.score,r=c.fields.filter((function(e){return e.mark===t.mark}));console.log("***",r);var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;setTimeout((function(){o({type:"SET_WIN_VARIATION",payload:null}),n()}),e)},u=c.fields.filter((function(e){return""===e.mark}));if(u.length<3&&function(){var t=c.fields.filter((function(t){return t.mark===e[0].mark})),n=c.fields.filter((function(t){return t.mark===e[1].mark}));s.every((function(e){return!e.every((function(e){return t.find((function(t){return t.n===e}))}))&&!e.every((function(e){return n.find((function(t){return t.n===e}))}))}))&&i(2e3)}(),0===u.length)return i(2e3);s.forEach((function(n){n.every((function(e){return r.find((function(t){return t.n===e}))}))&&(o({type:"SET_WIN_VARIATION",payload:n}),function(){var n=e.findIndex((function(e){return e.mark===t.mark}));console.log(n),o({type:"INIT_PLAYERS",payload:Object(l.a)(Object(l.a)({},c.players),{},Object(d.a)({},"player".concat(n),Object(l.a)(Object(l.a)({},c.players["player".concat(n)]),{},{score:a+1})))}),i(2e3)}())}))}),[c.fields,c.currentPlayer,c.players,b]),_=Object(p.jsxs)("div",{className:"column centered ".concat(f.a.x),children:[Object(p.jsx)("div",{className:f.a.lineL}),Object(p.jsx)("div",{className:f.a.lineR})]}),g=Object(p.jsx)("div",{className:f.a.o});return Object(p.jsx)("div",{className:"column centered ".concat(f.a.playgroundItem),onClick:function(){return m()},children:b&&("o"===b?g:_)})};function O(){var e=Object(a.useContext)(T),t=e.store,n=e.dispatch,r=Object(a.useState)({}),c=Object(i.a)(r,2),o=c[0],s=c[1],d=Object(a.useCallback)((function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[],a=0;a<e*e;a++)t.push({n:a,mark:""});console.log(t),n({type:"INIT_FIELDS",payload:t})}),[]);Object(a.useEffect)((function(){d()}),[]),Object(a.useEffect)((function(){console.log(t.winVariation)}),[t.winVariation]),Object(a.useEffect)((function(){var e,n;switch(null===(e=t.winVariation)||void 0===e?void 0:e.join("")){case"012":return s({top:"17%"});case"345":return s({top:"50%"});case"678":return s({top:"83%"});case"048":return s({top:"50%",transform:"rotateZ(45deg)"});case"246":return s({top:"50%",transform:"rotateZ(-45deg)"});case"036":return s({right:"35%",transform:"rotateZ(90deg)"});case"147":return s({transform:"rotateZ(90deg)"});case"258":return s({left:"33%",transform:"rotateZ(90deg)"});default:s({background:"blue"})}console.log(null===(n=t.winVariation)||void 0===n?void 0:n.join(""))}),[t.winVariation]);var j=Object(p.jsx)("div",{className:u.a.winLine,style:Object(l.a)({},o)});return Object(p.jsxs)("div",{className:"row centered ".concat(u.a.playground),children:[t.winVariation&&j,t.fields.map((function(e,t){return Object(p.jsx)(b,{n:t,initGame:d},t)}))]})}var m=n(11),y=n.n(m);function _(){var e=Object(a.useContext)(T).store;return Object(p.jsxs)("div",{className:"column  ".concat(y.a.raiting),children:[Object(p.jsx)("h1",{children:"Raiting"}),Object.values(e.players).map((function(e){return Object(p.jsxs)("p",{children:["[",e.mark,"] ",e.name,": ",e.score]},e.name)})),Object(p.jsx)("button",{onClick:function(){return window.location.reload()},children:"New game"})]})}var g=n(8),v=n.n(g),x=function(){return Object(p.jsx)("div",{className:"row centered ".concat(v.a.game),children:Object(p.jsxs)("div",{className:"row centered shadow ".concat(v.a.wrapper),children:[Object(p.jsx)(O,{}),Object(p.jsx)(_,{})]})})},h=n(9),I=n.n(h),S=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],c=Object(a.useContext)(T),o=(c.store,c.dispatch),s=Object(a.useCallback)((function(){o({type:"INIT_PLAYERS",payload:n}),o({type:"SET_SHOW_START_MODAL",payload:!1})}),[n]);return Object(p.jsx)("div",{className:"column centered ".concat(I.a.modalBackface),children:Object(p.jsxs)("div",{className:"column centered ".concat(I.a.modal),children:[Object(p.jsx)("h1",{children:"Introduce yourself"}),Object(p.jsx)("p",{children:"Player 1"}),Object(p.jsx)("input",{type:"text",onChange:function(e){return r(Object(l.a)(Object(l.a)({},n),{},{player0:{name:e.target.value,score:0,mark:"x"}}))}}),Object(p.jsx)("p",{children:"Player 2"}),Object(p.jsx)("input",{type:"text",onChange:function(e){return r(Object(l.a)(Object(l.a)({},n),{},{player1:{name:e.target.value,score:0,mark:"o"}}))}}),Object(p.jsx)("button",{onClick:function(){return s()},children:"Submit"})]})})},k=n(12),w=n.n(k),N=function(){var e=Object(a.useContext)(T),t=e.store,n=e.dispatch;return Object(p.jsxs)("div",{className:"column centered ".concat(w.a.startScreen),children:[Object(p.jsx)("h1",{children:"Hello"}),Object(p.jsx)("button",{onClick:function(){return n({type:"SET_SHOW_START_MODAL",payload:!0})},children:"Start"}),t.showStartModal&&Object(p.jsx)(S,{})]})},T=Object(a.createContext)(),E=function(e,t){switch(t.type){case"SET_SHOW_START_MODAL":return Object(l.a)(Object(l.a)({},e),{},{showStartModal:t.payload});case"INIT_PLAYERS":return console.log(t.payload),Object(l.a)(Object(l.a)({},e),{},{players:t.payload});case"INIT_FIELDS":return Object(l.a)(Object(l.a)({},e),{},{fields:t.payload});case"SET_CURRENT_PLAYER":return Object(l.a)(Object(l.a)({},e),{},{currentPlayer:t.payload});case"SET_WIN_VARIATION":return Object(l.a)(Object(l.a)({},e),{},{winVariation:t.payload});default:return e}},C=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];var A=function(){var e=Object(a.useReducer)(E,{showStartModal:!1,currentPlayer:0,fields:[]}),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(p.jsx)(T.Provider,{value:{store:n,dispatch:r,winningVariations:C},children:Object(p.jsx)("div",{className:"App",children:n.players?Object(p.jsx)(x,{}):Object(p.jsx)(N,{})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(A,{})}),document.getElementById("root")),P()}],[[20,1,2]]]);
//# sourceMappingURL=main.744110df.chunk.js.map